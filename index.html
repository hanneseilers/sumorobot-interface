<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>SumoRobot</title>
    <!-- css -->
    <link rel="stylesheet" type="text/css" href="assets/css/styles.css">
    <link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="assets/css/cookieconsent.min.css">
    <!-- favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="assets/img/favicon_32x32.png">
    <!-- cookie notification -->
    <script src="assets/js/min/cookieconsent.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="assets/js/cookie.js" type="text/javascript" charset="utf-8"></script>
    <!-- jquery, bootstrap -->
    <script src="assets/js/min/jquery.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="assets/js/min/bootstrap.min.js" type="text/javascript" charset="utf-8"></script>
    <!-- ace editor -->
    <script src="assets/js/ace/ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="assets/js/ace/ext-language_tools.js" type="text/javascript" charset="utf-8"></script>
    <!-- Google Blockly -->
    <script src="assets/blockly/blockly_compressed.js" type="text/javascript" charset="utf-8"></script>
    <script src="assets/blockly/blocks_compressed.js" type="text/javascript" charset="utf-8"></script>
    <script src="assets/blockly/javascript_compressed.js" type="text/javascript" charset="utf-8"></script>
    <script src="assets/blockly/msg/js/en.js" type="text/javascript" charset="utf-8"></script>
    <!-- PeerJS -->
    <script src="https://cdn.jsdelivr.net/npm/peerjs@0.3.20/dist/peer.min.js" type="text/javascript"
        charset="utf-8"></script>
    <!-- Custom scripts -->
    <script>var page = "main"</script>
    <script src="assets/js/ble.js" type="text/javascript" charset="utf-8"></script>
    <script src="assets/js/sumorobot.js" type="text/javascript" charset="utf-8"></script>
    <script src="assets/js/utils.js" type="text/javascript" charset="utf-8"></script>
    <script src="assets/js/ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="assets/js/blockly.js" type="text/javascript" charset="utf-8"></script>
    <script src="assets/js/main.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
    <div id="battery"><img src="assets/img/battery_disconnected.png"></div>

    <div id="panel">
        <img class="logo" src="assets/img/logo.png" alt="logo"></br>
        <div class="btn-group btn-group-robot" role="group" aria-label="robots">
            <a href="#" class="btn btn-lg btn-robot-go">GO!</a>
        </div>
        <div class="footer">
            <h6>Version: 0.8.0 <br>Timestamp: 2019.08.14 08:00</h6>
        </div>
    </div>

    <div id="info-panel">
        <div id="inner-info-panel">
            <h1 id="info-panel-text"></h1>
        </div>
    </div>

    <div id="cal-panel">
        <div id="inner-cal-panel">
            <h2>SumoRobot name</h2>
            <h6>Restart SumoRobot to see new name</h6>
            <input type="text" id="name-field" value="SumoRobot">
            <br><br>
            <h2>Sonar threshold</h2>
            <input type="text" id="sonar-cal-field" value="40" readonly>
            <input type="range" min="5" max="150" value="40" step="1"
                onchange="sumorobot.send('sonar' + this.value);" oninput="$('#sonar-cal-field').val(this.value);" />
            <br><br>
            <div style="float: left; margin-left: 25%;">
                <h2>Left line threshold</h2>
                <input type="text" id="left-line-cal-field" value="1000" readonly>
                <input type="range" min="5" max="3000" value="1000" step="5"
                    onchange="sumorobot.send('linel' + this.value);" oninput="$('#left-line-cal-field').val(this.value);" />
                <br><br>
            </div>
            <div style="float: right; margin-right: 25%;">
                <h2>Right line threshold</h2>
                <input type="text" id="right-line-cal-field" value="1000" readonly>
                <input type="range" min="5" max="3000" value="1000" step="5"
                    onchange="sumorobot.send('liner' + this.value);" oninput="$('#right-line-cal-field').val(this.value);" />
                <br><br>
            </div>
            <div style="clear: both;"></div>
            <br><br>
            <div style="float: left; margin-left: 25%;">
                <h2>Left servomotor</h2>
                <input type="text" id="left-servo-min-cal-field" value="1" readonly>
                <input type="text" id="left-servo-max-cal-field" value="100" readonly>
                <section class="range-slider" style="margin-left: auto; margin-right: auto;">
                    <input id="left-servo-min-cal-slider" value="1" min="1" max="100" step="1" type="range"
                        onchange="sumorobot.send('servovl' + this.value)" oninput="updateServoSliderValues()" />
                    <input id="left-servo-max-cal-slider" value="100" min="1" max="100" step="1" type="range"
                        onchange="sumorobot.send('servovl' + this.value)" oninput="updateServoSliderValues()" />
                </section>
            </div>
            <div style="float: right; margin-right: 25%;">
                <h2>Right servomotor</h2>
                <input type="text" id="right-servo-min-cal-field" value="1" readonly>
                <input type="text" id="right-servo-max-cal-field" value="30" readonly>
                <section class="range-slider" style="margin-left: auto; margin-right: auto;">
                    <input id="right-servo-min-cal-slider" value="1" min="1" max="100" step="1" type="range"
                        onchange="sumorobot.send('servovr' + this.value)" oninput="updateServoSliderValues()" />
                    <input id="right-servo-max-cal-slider" value="30" min="1" max="100" step="1" type="range"
                        onchange="sumorobot.send('servovr' + this.value)" oninput="updateServoSliderValues()" />
                </section>
            </div>
            <div style="clear: both;"></div>
            <br><br>
            <input type="button" value="DONE"
                onclick="updateCalibrationValues();$('#cal-panel').hide();">
        </div>
    </div>

    <div id="notification-panel">
        <div id="inner-notification-panel">
            <h2>Please update the SumoFirmware</h2>
            <h6>To update the SumoFirmware download the latest SumoManager.</h6>
            <a href="https://www.robokoding.com/kits/sumorobot/sumomanager">
                https://www.robokoding.com/kits/sumorobot/sumomanager</a>
            <br>
            <input type="button" value="OK" onclick="$('#notification-panel').hide()">
        </div>
    </div>

    <table class="blockly-table">
        <tr>
            <td id="leftCell">
                <div id="blocklyArea"></div>
                <div id="blocklyCode"></div>
            </td>
            <td id="rightCell">
              <div id="stream"></div>
              <div id="javascriptConsole"><h2 id="javascriptConsoleText">...</h2></div>
              <div id="readOnlyBlocklyCode"></div>
              <div id="peer-call-panel" style="display: none;">
                  <video id="their-video" width="75%" autoplay controls></video>
                  <video id="my-video" muted="muted" class="float" width="50%" height="50%" autoplay controls></video>
                  <br>
                  <span id="call-id"></span>
                  <button id="call" class="btn btn-sm btn-primary">Start a Video Call</button>
              </div>
            </td>
        </tr>
    </table>

    <div id="blocklyDiv" style="position: absolute;"></div>

    <xml id="toolbox" style="display: none">
    <block type="controls_if"></block>
    <block type="controls_whileTrue"></block>
    <block type="controls_whileUntil"></block>
    <block type="sumorobot_sonar"></block>
    <block type="sumorobot_line"></block>
    <block type="sumorobot_sonar_distance"></block>
    <block type="sumorobot_move"></block>
    <block type="sumorobot_wait"></block>
    <block type="sumorobot_servo"></block>
    <block type="sumorobot_led"></block>
    </xml>

    <div class="btn-group d-flex btn-group-control" role="group">
        <a href="#" class="btn btn-lg btn-success btn-start w-100">Start</a>
        <a href="#" class="btn btn-lg btn-danger btn-stop w-100">Stop</a>
    </div>
</body>
</html>
